from machine import PWM
import time

notes={'PAUSE':1,
        'C_0' : 16,
        'C#_0' : 17,
        'D_0' : 18,
        'D#_0' : 19,
        'E_0' : 21,
        'F_0' : 22,
        'F#_0' : 23,
        'G_0' : 25,
        'G#_0' : 26,
        'A_0' : 28,
        'A#_0' : 29,
        'B_0': 31,

        'C_1' : 33,
        'C#_1' : 35,
        'D_1' : 37,
        'D#_1' : 39,
        'E_1' : 41,
        'F_1' : 44,
        'F#_1' : 46,
        'G_1' : 49,
        'G#_1' : 52,
        'A_1' : 55,
        'A#_1' : 58,
        'B_1' : 62,

        'C_2' : 65,
        'C#_2' : 69,
        'D_2' : 73,
        'D#_2' : 78,
        'E_2' : 82,
        'F_2' : 87,
        'F#_2' : 93,
        'G_2' : 98,
        'G#_2' : 104,
        'A_2' : 110,
        'A#_2' : 117,
        'B_2' : 123,

        'C_3' : 131,
        'C#_3' : 139,
        'D_3' : 147,
        'D#_3' : 156,
        'E_3' : 165,
        'F_3' : 175,
        'F#_3' : 185,
        'G_3' : 196,
        'G#_3' : 208,
        'A_3' : 220,
        'A#_3' : 233,
        'B_3' : 247,

        'C_4' : 262,
        'C#_4' : 277,
        'D_4' : 294,
        'D#_4' : 311,
        'E_4' : 330,
        'F_4' : 349,
        'F#_4' : 370,
        'G_4' : 392,
        'G#_4' : 415,
        'A_4' : 440,
        'A#_4' : 466,
        'B_4' : 496,

        'C_5' : 523,
        'C#_5' : 554,
        'D_5' : 587,
        'D#_5' : 622,
        'E_5' : 659,
        'F_5' : 698,
        'F#_5' : 740,
        'G_5' : 784,
        'G#_5' : 831,
        'A_5' : 880,
        'A#_5' : 932,
        'B_5' : 988,

        'C_6' : 1047,
        'C#_6' : 1109,
        'D_6' : 1175,
        'D#_6' : 1245,
        'E_6' : 1319,
        'F_6' : 1397,
        'F#_6' : 1480,
        'G_6' : 1568,
        'G#_6' : 1661,
        'A_6' : 1760,
        'A#_6' : 1865,
        'B_6' : 1976,

        'C_7' : 2093,
        'C#_7' : 2217,
        'D_7' : 2349,
        'D#_7' : 2489,
        'E_7' : 2636,
        'F_7' : 2794,
        'F#_7' : 2960,
        'G_7' : 3136,
        'G#_7' : 3322,
        'A_7' : 3520,
        'A#_7' : 3729,
        'B_7' : 3951,

        'C_8' : 4186,
        'C#_8' : 4435,
        'D_8' : 4699,
        'D#_8' : 4978,
        'E_8' : 5274,
        'F_8' : 5588,
        'F#_8' : 5920,
        'G_8' : 6272,
        'G#_8' : 6645,
        'A_8' : 7040,
        'A#_8' : 7459,
        'B_8' : 7902}

figures={
        're' : 1,
        'bl' : 1/2,
        'ne' : 1/4,
        'co' : 1/8,
        'sc' : 1/16,
        'fu' : 1/32,
        'sf' : 1/64,
        'tb' : 1/3,
        'tn' : 1/6,
        'tc' : 1/12,
        'ts' : 1/24
        }

#duty = volume
def play(pin, melody, duty, speed):
    pwm= PWM(pin)
    for i in melody:
        pwm.freq(notes[i[:-3]])
        pwm.duty(duty)
        time.sleep(figures[i[-2:]]*speed)
        pwm.duty(0)
        time.sleep(figures[i[-2:]])