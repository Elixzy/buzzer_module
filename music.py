from machine import PWM
import time

notes={'PAUSE':1,
        'DO_0' : 16,
        'DOs_0' : 17,
        'RE_0' : 18,
        'REs_0' : 19,
        'MI_0' : 21,
        'FA_0' : 22,
        'FAs_0' : 23,
        'SOL_0' : 25,
        'SOLs_0' : 26,
        'LA_0' : 28,
        'LAs_0' : 29,
        'SI_0': 31,

        'DO_1' : 33,
        'DOs_1' : 35,
        'RE_1' : 37,
        'REs_1' : 39,
        'MI_1' : 41,
        'FA_1' : 44,
        'FAs_1' : 46,
        'SOL_1' : 49,
        'SOLs_1' : 52,
        'LA_1' : 55,
        'LAs_1' : 58,
        'SI_1' : 62,

        'DO_2' : 65,
        'DOs_2' : 69,
        'RE_2' : 73,
        'REs_2' : 78,
        'MI_2' : 82,
        'FA_2' : 87,
        'FAs_2' : 93,
        'SOL_2' : 98,
        'SOLs_2' : 104,
        'LA_2' : 110,
        'LAs_2' : 117,
        'SI_2' : 123,

        'DO_3' : 131,
        'DOs_3' : 139,
        'RE_3' : 147,
        'REs_3' : 156,
        'MI_3' : 165,
        'FA_3' : 175,
        'FAs_3' : 185,
        'SOL_3' : 196,
        'SOLs_3' : 208,
        'LA_3' : 220,
        'LAs_3' : 233,
        'SI_3' : 247,

        'DO_4' : 262,
        'DOs_4' : 277,
        'RE_4' : 294,
        'REs_4' : 311,
        'MI_4' : 330,
        'FA_4' : 349,
        'FAs_4' : 370,
        'SOL_4' : 392,
        'SOLs_4' : 415,
        'LA_4' : 440,
        'LAs_4' : 466,
        'SI_4' : 496,

        'DO_5' : 523,
        'DOs_5' : 554,
        'RE_5' : 587,
        'REs_5' : 622,
        'MI_5' : 659,
        'FA_5' : 698,
        'FAs_5' : 740,
        'SOL_5' : 784,
        'SOLs_5' : 831,
        'LA_5' : 880,
        'LAs_5' : 932,
        'SI_5' : 988,

        'DO_6' : 1047,
        'DOs_6' : 1109,
        'RE_6' : 1175,
        'REs_6' : 1245,
        'MI_6' : 1319,
        'FA_6' : 1397,
        'FAs_6' : 1480,
        'SOL_6' : 1568,
        'SOLs_6' : 1661,
        'LA_6' : 1760,
        'LAs_6' : 1865,
        'SI_6' : 1976,

        'DO_7' : 2093,
        'DOs_7' : 2217,
        'RE_7' : 2349,
        'REs_7' : 2489,
        'MI_7' : 2636,
        'FA_7' : 2794,
        'FAs_7' : 2960,
        'SOL_7' : 3136,
        'SOLs_7' : 3322,
        'LA_7' : 3520,
        'LAs_7' : 3729,
        'SI_7' : 3951,

        'DO_8' : 4186,
        'DOs_8' : 4435,
        'RE_8' : 4699,
        'REs_8' : 4978,
        'MI_8' : 5274,
        'FA_8' : 5588,
        'FAs_8' : 5920,
        'SOL_8' : 6272,
        'SOLs_8' : 6645,
        'LA_8' : 7040,
        'LAs_8' : 7459,
        'SI_8' : 7902}

figures={
        'r' : 1,
        'b' : 1/2,
        'n' : 1/4,
        'c' : 1/8,
        'sc' : 1/16,
        'f' : 1/32,
        'sf' : 1/64,
        'tb' : 1/3,
        'tn' : 1/6,
        'tc' : 1/12,
        'tsc' : 1/24}

def play(pin, melody, duty, speed):
    pwm= PWM(pin)
    for i in melody:
        pwm.freq(notes[i[0]])
        pwm.duty(duty)
        time.sleep(figures[i[1]]*speed)
        pwm.duty(0)
        time.sleep(figures[i[1]])